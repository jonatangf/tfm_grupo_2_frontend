@if(user){
<div class="userFormSidebar">
  <div class="profileHeader">
    
          @if(!isEditing){
    <h2 class="profileTitle">PERFIL</h2>
      }

            @if(isEditing){
    <h2 class="profileTitle">EDITAR PERFIL</h2>
      }


    <div class="profileIcons">
      @if(!isEditing){
      <button class="iconButton" (click)="toggleEdit()">✎</button>
      }
      <button class="iconButton" (click)="onCancel()">✕</button>
    </div>
  </div>
<!-- Avatar -->
<div class="avatarContainer">
  <div class="avatarWrapper" (click)="onAvatarClick(avatarInput)">
    <i class="bi bi-person-circle avatarIcon"></i>
  </div>


  <!-- input oculto para seleccionar archivo, escondemos lo típico de "Subir archivo" de este tipo de inputs -->
  <input 
    type="file" 
    accept="image/*" 
    #avatarInput 
    class="hiddenFileInput" 
    (change)="onAvatarSelected($event)">
</div>
  <form class="profileForm">
    <!-- Puntuación (siempre readonly) -->
    <div class="detailContainer">
      <label class="detailLabel">PUNTUACIÓN</label>
      <div class="ratingValue">{{ user.avg_rating }}</div>
    </div>

    <!-- Correo -->
    <div class="detailContainer">
      <label class="detailLabel">CORREO</label>
      <input 
        [(ngModel)]="editableUser.email" 
        name="email"
        [readonly]="!isEditing" />
    </div>

    <!-- Interés -->
    <div class="detailContainer">
      <label class="detailLabel">DESCRIPCIÓN</label>
      <textarea 
        [(ngModel)]="editableUser.description" 
        name="description"
        [readonly]="!isEditing">
      </textarea>
    </div>
  </form>

  <!-- Botón Editar Perfil -->
   @if(isEditing){
    <div class="profileActions">
      <button type="button" (click)="onSave()">EDITAR PERFIL</button>
    </div>
   }


   @if(!isEditing){
    <div class="profileActions">
      <button type="button" (click)="onLogout()" class="logout-button">CERRAR SESIÓN</button>
    </div>
   }

</div>
}

